<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="Andrew Maul, Brendan Erquiaga">
	<meta name="description" content="EDH Draft League 2016">
	<title>Admin Center</title>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css">
	<link rel="stylesheet" href="sass/milligram.css">
	<link rel="stylesheet" href="css/main.css">
	<!--<link rel="icon" href="https://milligram.github.io/img/favicon.png">-->

	<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase.js"></script>
	<script>
		// Initialize Firebase
		var config = {
			apiKey: "AIzaSyAlRO_7_sv1BhgJ6xT1MRscondyLoh70vo",
			authDomain: "draftleague2017.firebaseapp.com",
			databaseURL: "https://draftleague2017.firebaseio.com",
			storageBucket: "draftleague2017.appspot.com",
			messagingSenderId: "382673579824"
		};
		firebase.initializeApp(config);
	</script>

	<script type="text/javascript">
		/**
		 * Function called when clicking the Login/Logout button.
		 */
		// [START buttoncallback]
		function toggleSignIn() {
			if (!firebase.auth().currentUser) {
				// [START createprovider]
				var provider = new firebase.auth.GoogleAuthProvider();
				// [END createprovider]
				// [START addscopes]
				provider.addScope('https://www.googleapis.com/auth/plus.login');
				// [END addscopes]
				// [START signin]
				firebase.auth().signInWithRedirect(provider);
				// [END signin]
			} else {
				// [START signout]
				firebase.auth().signOut();
				// [END signout]
			}
			// [START_EXCLUDE]
			document.getElementById('quickstart-sign-in').disabled = true;
			// [END_EXCLUDE]
		}
		// [END buttoncallback]
		/**
		 * initApp handles setting up UI event listeners and registering Firebase auth listeners:
		 *  - firebase.auth().onAuthStateChanged: This listener is called when the user is signed in or
		 *    out, and that is where we update the UI.
		 *  - firebase.auth().getRedirectResult(): This promise completes when the user gets back from
		 *    the auth redirect flow. It is where you can get the OAuth access token from the IDP.
		 */
		function initApp() {
			// Result from Redirect auth flow.
			// [START getidptoken]
			firebase.auth().getRedirectResult().then(function(result) {
				if (result.credential) {
					// This gives you a Google Access Token. You can use it to access the Google API.
					var token = result.credential.accessToken;
					// [START_EXCLUDE]
					//document.getElementById('quickstart-oauthtoken').textContent = token;
				} else {
					//document.getElementById('quickstart-oauthtoken').textContent = 'null';
					// [END_EXCLUDE]
				}
				// The signed-in user info.
				var user = result.user;
			}).catch(function(error) {
				// Handle Errors here.
				var errorCode = error.code;
				var errorMessage = error.message;
				// The email of the user's account used.
				var email = error.email;
				// The firebase.auth.AuthCredential type that was used.
				var credential = error.credential;
				// [START_EXCLUDE]
				if (errorCode === 'auth/account-exists-with-different-credential') {
					alert('You have already signed up with a different auth provider for that email.');
					// If you are using multiple auth providers on your app you should handle linking
					// the user's accounts here.
				} else {
					console.error(error);
				}
				// [END_EXCLUDE]
			});
			// [END getidptoken]
			// Listening for auth state changes.
			// [START authstatelistener]
			firebase.auth().onAuthStateChanged(function(user) {
				if (user) {
					// User is signed in.
					var displayName = user.displayName;
					var email = user.email;
					var emailVerified = user.emailVerified;
					var photoURL = user.photoURL;
					var isAnonymous = user.isAnonymous;
					var uid = user.uid;
					var providerData = user.providerData;
					// [START_EXCLUDE]
					document.getElementById('quickstart-sign-in-status').textContent = displayName;
					document.getElementById('userIcon').src = photoURL;
					document.getElementById('quickstart-sign-in').textContent = 'Sign out';
					// [END_EXCLUDE]
				} else {
					// User is signed out.
					// [START_EXCLUDE]
					document.getElementById('quickstart-sign-in-status').textContent = 'Signed out';
					document.getElementById('quickstart-sign-in').textContent = 'Sign in';
					document.getElementById('userIcon').src = 'img/alesha.jpg';
					// [END_EXCLUDE]
				}
				// [START_EXCLUDE]
				document.getElementById('quickstart-sign-in').disabled = false;
				// [END_EXCLUDE]
			});
			// [END authstatelistener]
			document.getElementById('quickstart-sign-in').addEventListener('click', toggleSignIn, false);
		}
		window.onload = function() {
			initApp();
		};
	</script>
</head>

<body class="draft">
	<header>
		<section class="container">
			<picture>
				<source media="(max-width: 480px)" srcset="img/banner_small.jpg">
				<source media="(max-width: 768px)" srcset="img/banner_medium.jpg">
				<source media="(max-width: 1280px)" srcset="img/banner_large.jpg">
				<img src="img/banner_largest.jpg" alt="EDH Draft League Banner">
			</picture>
		</section>
	</header>
	<main class="container">
		<section>
			<nav class="row">
				<div class="column"><a href="index.html">Draft</a></div>
				<div class="column"><a href="index.html" class="active">Admin</a></div>
				<div class="column"><a href="rules.html">League Rules</a></div>
				<div class="column"><a href="data_2016.html">Season 1 Data</a></div>
			</nav>
		</section>
		<section>
			<h1>Admin Center</h1>
			<!-- Container for the demo -->
			<div class="mdl-card__supporting-text mdl-color-text--grey-600">
				<!-- Button that handles sign-in/sign-out -->
				<button disabled class="mdl-button mdl-js-button mdl-button--raised" id="quickstart-sign-in">Sign in with Google</button>

				<!-- Container where we'll display the user details -->
				<div class="quickstart-user-details-container">
					<img src="img/alesha.jpg" id="userIcon" height="50px" width="50px" />
					<span id="quickstart-sign-in-status">Unknown</span>
				</div>
			</div>
		</section>
		<section id="autoDraftSection">
			<label class="switch">
				<input type="checkbox" id="draftMasterSwitch">
				<div class="slider round"></div>
			</label>
			<span>Auto Drafter</span>
		</section>
		<footer>
			<section>
				<p>Magic the Gathering, FNM is TM and copyright Wizards of the Coast, Inc, a subsidiary of Hasbro, Inc. All rights reserved. This site is unaffiliated. /legalese
					<br /> Site built using <a href="https://milligram.github.io/" target="new">Milligram.io</a> and <a href="http://www.chartjs.org/" target="new">Chart.js</a>
				</p>
			</section>
		</footer>
	</main>
</body>

<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase.js"></script>
<script>
	// Initialize Firebase
	var config = {
		apiKey: "AIzaSyAlRO_7_sv1BhgJ6xT1MRscondyLoh70vo",
		authDomain: "draftleague2017.firebaseapp.com",
		databaseURL: "https://draftleague2017.firebaseio.com",
		storageBucket: "draftleague2017.appspot.com",
		messagingSenderId: "382673579824"
	};
	firebase.initializeApp(config);
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery.min.js"><\/script>')</script>
<script data-main="js/admin" src="require.js"></script>

</html>
